!function t(o,e,r){function n(c,i){if(!e[c]){if(!o[c]){var u="function"==typeof require&&require;if(!i&&u)return u(c,!0);if(s)return s(c,!0);throw new Error("Cannot find module '"+c+"'")}var l=e[c]={exports:{}};o[c][0].call(l.exports,function(t){var e=o[c][1][t];return n(e?e:t)},l,l.exports,t,o,e,r)}return e[c].exports}for(var s="function"==typeof require&&require,c=0;c<r.length;c++)n(r[c]);return n}({1:[function(t,o){o.exports=["$httpProvider",function(t){t.interceptors.push("authInterceptor")}]},{}],2:[function(t,o){t("../models/user");o.exports=["$scope","$http","$routeParams","$location",function(t,o,e,r){t.user=!1,t.$watch("user",function(o){t.$root.user=o});o.get("/api/user").success(function(o){t.user=o}).error(function(t){console.log(t)});t.isActive=function(t){return t===r.path()},t.logout=function(){t.user=!1,r.path("/logout")}}]},{"../models/user":18}],3:[function(t,o){var e=t("../models/comment"),r=t("../models/user");o.exports=["$scope","$http","$routeParams",function(t,o,n){t.comments=[],t.comment=new e,t.postId=n.id,t.dummy_user=new r({name:"Philipp",joined:Date.now()}),this.list=function(){var e=o.get("/api/comments/to/"+t.postId);e.success(function(o){t.comments=o}),e.error(function(t){console.log(t)})},this.create=function(){t.comment.user=t.dummy_user,t.comment.postId=t.postId;var e=o.post("/api/comment",t.comment);e.success(function(o){t.comments.push(o)}),e.error(function(t){console.log(t)}),t.comment={}},this.answer=function(){console.log(t);var e={},r=o.get("/comments/comment-template");r.success=function(t){e=t,console.log(e),$(document).prepend(e)}},this.upvote=function(t){var r=new e(t);r.score.upvotes++,o.put("/api/comment/"+r._id+"/upvote",r).error(function(t){r.score.upvotes--,console.log(t)})},this.downvote=function(t){var r=new e(t);r.score.downvotes++,o.put("/api/comment/"+r._id+"/downvote",r).error(function(t){r.score.downvotes--,console.log(t)})},this.list()}]},{"../models/comment":15,"../models/user":18}],4:[function(t,o){t("../models/post");o.exports=["$scope","$http","$routeParams",function(t,o,e){t.post={},o.get("/api/post/"+e.id).success(function(o){t.post=o}).error(function(t){console.log(t)})}]},{"../models/post":16}],5:[function(t,o){t("../models/post"),t("../models/score");o.exports=["$scope","$http","$location","$routeParams",function(t,o){t.posts=[],t.updatePackery=function(){$(".posts").packery()},o.get("/api/posts").success(function(o){t.posts=o}).error(function(t){console.log(t)})}]},{"../models/post":16,"../models/score":17}],6:[function(t,o){{var e=t("../models/post");t("../models/score"),t("../models/user")}o.exports=["$scope","$http","$location","$routeParams",function(t,o,r,n){t.postId=n.id,t.create=function(t){var n=new e(t);console.log(n),o.post("/api/post",n).success(function(){r.path("/")}).error(function(t){console.log(t)})}}]},{"../models/post":16,"../models/score":17,"../models/user":18}],7:[function(t,o){o.exports=["$scope","$http","$location","$routeParams",function(t,o){t.upvote=function(){var e=t.post._id;o.put("/api/post/"+e+"/upvote/",t.post).success(function(o){console.log(o),t.post.votes=o.votes}).error(function(t){console.log(t)})},t.downvote=function(){var e=t.post._id;o.put("/api/post/"+e+"/downvote/",t.post).success(function(o){t.post.votes=o.votes}).error(function(t){console.log(t)})},t.score=function(){var o=0;if(!t.post.votes)return o;for(var e=0;e<t.post.votes.length;e++)o+=t.post.votes[e].vote;return o},t.hasUpvoted=function(){if(!t.post||!t.$root.user||!t.post.votes)return!1;for(var o=t.post,e=t.$root.user._id,r=!1,n=0;n<o.votes.length;n++)o.votes[n].userId==e&&1==o.votes[n].vote&&(r=!0);return r},t.hasDownvoted=function(){if(!t.post||!t.$root.user||!t.post.votes)return!1;for(var o=t.post,e=t.$root.user._id,r=!1,n=0;n<o.votes.length;n++)o.votes[n].userId==e&&-1==o.votes[n].vote&&(r=!0);return r}}]},{}],8:[function(t,o){o.exports.authHeader=["$location",function(){return{restrict:"E",templateUrl:"/auth/header"}}]},{}],9:[function(t,o,e){e.comment=function(){return{templateUrl:"/comments/comment-template"}},e.commentForm=function(){return{templateUrl:"/comments/comment-form"}}},{}],10:[function(t,o){o.exports.post=function(){return{templateUrl:"/posts/post-template",replace:!0,controller:"PostController"}},o.exports.form=function(){return{templateUrl:"/posts/post-form",controller:"PostFormController"}}},{}],11:[function(t,o){o.exports=function(){var t,o,e=$(".posts");return t=function(t,o,e){t.$last&&setTimeout(function(){t.$emit("postsloaded",o,e)},1)},o=function(t){t.$on("postsloaded",function(){console.log("initialize packery"),e.packery({gutter:0})})},{link:t,restrict:"A",controller:o}}},{}],12:[function(t,o){o.exports=function(t){var o,e=function(o){t.$broadcast("auth.update",o)},r=function(t){o=t,e(o)};return{update:r,state:o}}},{}],13:[function(t,o){o.exports=["$q","$location",function(t,o){var e={response:function(o){return 401===o.status,o||t.when(o)},responseError:function(t){401===t.status&&o.path("/login").search("returnTo",JSON.parse(t.data).returnTo)}};return e}]},{}],14:[function(t){var o=angular.module("reddit",["ngRoute"]),e=t("./routes/post"),r=t("./routes/auth"),n=t("./routes/presentation"),s=t("./controllers/post"),c=t("./controllers/list-view"),i=t("./controllers/detail-view"),u=t("./controllers/post-form"),l=t("./controllers/comment"),p=t("./controllers/auth"),a=t("./directives/post"),f=t("./directives/comment"),m=t("./directives/auth"),d=t("./directives/posts-loaded"),v=t("./factories/auth-interceptor"),h=t("./factories/auth-change-notifier"),g=t("./config/interceptor");o.factory("authInterceptor",v),o.factory("authState",h),o.config(g),o.config(e),o.config(r),o.config(n),o.controller("PostController",s),o.controller("DetailViewController",i),o.controller("ListViewController",c),o.controller("PostFormController",u),o.controller("CommentController",l),o.controller("AuthController",p),o.directive("post",a.post),o.directive("postform",a.form),o.directive("comment",f.comment),o.directive("commentform",f.commentForm),o.directive("authheader",m.authHeader),o.directive("postsLoaded",d)},{"./config/interceptor":1,"./controllers/auth":2,"./controllers/comment":3,"./controllers/detail-view":4,"./controllers/list-view":5,"./controllers/post":7,"./controllers/post-form":6,"./directives/auth":8,"./directives/comment":9,"./directives/post":10,"./directives/posts-loaded":11,"./factories/auth-change-notifier":12,"./factories/auth-interceptor":13,"./routes/auth":19,"./routes/post":20,"./routes/presentation":21}],15:[function(t,o){var e=t("./user"),r=t("./score"),n=t("extend");o.exports=function(t){var o=this,s={text:"",parent:null,posted:Date.now(),user:new e,score:new r,postId:-1};return n(o,s,t)}},{"./score":17,"./user":18,extend:22}],16:[function(t,o){var e=t("extend");o.exports=function(t){var o=this,r={title:"",text:"",image:"",posted:Date.now()};return e(o,r,t)}},{extend:22}],17:[function(t,o){var e=t("extend");o.exports=function(t){var o=this,r={upvotes:0,downvotes:0,get:function(){return o.upvotes-o.downvotes}};return e(o,r,t)}},{extend:22}],18:[function(t,o){var e=t("extend");o.exports=function(t){var o=this,r={email:"",password:""};return e(o,r,t)}},{extend:22}],19:[function(t,o){o.exports=["$routeProvider",function(t){t.when("/login",{templateUrl:"/auth",controller:"AuthController"}).when("/register",{templateUrl:"/auth/register",controller:"AuthController"}).when("/logout",{templateUrl:"/auth/logout",controller:"AuthController"}).otherwise({redirectTo:"/404"})}]},{}],20:[function(t,o){o.exports=["$routeProvider",function(t){t.when("/",{templateUrl:"/posts/list",controller:"ListViewController"}).when("/post/:id",{templateUrl:function(t){return"/posts/post/"+t.id},controller:"DetailViewController"}).when("/add-link",{templateUrl:"/posts/post-form",controller:"PostFormController"}).when("/404",{templateUrl:"/posts/404"}).otherwise({redirectTo:"/404"})}]},{}],21:[function(t,o){o.exports=["$routeProvider",function(t){t.when("/presentation",{templateUrl:"/presentation",controller:"AuthController"}).otherwise({redirectTo:"/404"})}]},{}],22:[function(t,o){var e,r=Object.prototype.hasOwnProperty,n=Object.prototype.toString,s=function(t){"use strict";if(!t||"[object Object]"!==n.call(t))return!1;var o=r.call(t,"constructor"),s=t.constructor&&t.constructor.prototype&&r.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!o&&!s)return!1;var c;for(c in t);return c===e||r.call(t,c)};o.exports=function c(){"use strict";var t,o,r,n,i,u,l=arguments[0],p=1,a=arguments.length,f=!1;for("boolean"==typeof l?(f=l,l=arguments[1]||{},p=2):("object"!=typeof l&&"function"!=typeof l||null==l)&&(l={});a>p;++p)if(t=arguments[p],null!=t)for(o in t)r=l[o],n=t[o],l!==n&&(f&&n&&(s(n)||(i=Array.isArray(n)))?(i?(i=!1,u=r&&Array.isArray(r)?r:[]):u=r&&s(r)?r:{},l[o]=c(f,u,n)):n!==e&&(l[o]=n));return l}},{}]},{},[14]);